# SQL 문장 살펴 보기

## 01 SELECT문
```sql
SELECT * 혹은 컬럼
FROM [스키마.]테이블명 혹은 [스키마.]뷰명
WHERE 조건
ORDER BY 컬럼;
```

## 02 INSERT문

### 기본 형태
```sql
INSERT INTO [스키마.]테이블명 (컬럼1,컬럼2,...)
VALUES (값1,값2,...);
```

### 컬럼명 기술생략 형태
```sql
INSERT [스키마.]테이블명
VALUES (값1,값2,...);
```

### INSERT ~ SELECT 형태
```sql
INSERT INTO [스키마.]테이블명 (컬럼1,컬럼2,...)
SELECT 문;
```

### UPDATE문
```sql
UPDATE [스키마.]테이블명
SET 컬럼1 = 변견값1,
컬럼2 = 변경값2,
...
WHERE 조건;
```

### MERGE문
- 조건을 비교하여 해당 조건에 맞는 데이터가 없으면 INSERT, 있으면 UPDATE를 수행한다.
```sql
MERGE INTO [스키마.]테이블명
    USING (update나 insert될 데이터 원천)
        ON (update될 조건)
WHEN MATCHED THEN
    SET 컬럼1 = 값1, 컬럼2 = 값2, ...
WHERE update 조건
    DELETE WHERE update_delete 조건
WHEN NOT MATCHED THEN

```
```sql
MERGE INTO ex3_3 d
    USING (SELECT employee_id, salary, manager_id
            FROM employees
            WHERE manager_id = 146) b
            ON(d.employee_id = b.employee_id)
    WHEN MATCHED THEN
        UPDATE SET d.bonus_amt = d.bonus_amt + b.salary * 0.01
    WHEN NOT MATCHED THEN
        INSERT (d.employee_id, d.bonus_amt) values (b.employee_id,b.salary *.001)
        WHERE (b.salary < 8000);
```

## 05 DELETE문
1. 일반 구문
```sql
DELETE [FROM] [스키마.]테이블명
WHERE delete 조건;
```
2. 특정 파티션만 삭제할 경우의 구문
```sql
DELETE [FROM] [스키마.]테이블명 PARTITION (파티션명)
WHERE delete 조건;
```

## 06 COMMIT과 ROLLBACK TRUNCATE
- COMMIT은 변경한 데이터를 데이터베이스에 마지막으로 반영하는 역할
- ROLLBACK은 그 반대로 변경한 데이터를 변경하기 이전 상태로 되돌리는 역할
```sql
COMMIT [WORK] [TO SAVEPOINT 세이트포인트명];

ROLLBACK [WORK] [TO SAVEPOINT 세이브포인트명];
```

- TRUNCATE문에는 ROLLBACK를 실행하더라도 삭제된 데이터가 복구되지 않고 WHERE조건을 붙일 수 없다.
```sql
TRUNCATE TABLE [스키마명.]테이블명;
```

## 07 의사컬럼
- 테이블의 컬럼처럼 동작하지만 실제로 테이블에 저장되지는 않는 컬럼
- SELECT문에서는 의사컬럼을 사용할 수 잇지만 의사컬럼 값을 INSERT,UPDATE,DELETE 할 수는 없다.

- 대표적인 의사 컬럼 종류
    1. CONNECT_BY_ISCYCLE, CONNECT_BY_ISLEAF,LEVEL
        - 계층형 쿼리에서사용하는 의사컬럼
    2. NEXTVAL, CURRVAL
        - 시퀀스에서 사용하는 의사컬럼
    3. ROWNUM,ROWID
        - 각 쿼리에서 반환되는 각 로우들에 대한 순서 값을 나타내는 의사컬럼
        - B-tree 인덱스에서 해당 테이블 로우를 찾아가기 위한 주소 정보가 바로 ROWID이다.